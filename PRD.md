# 产品需求文档 (PRD) - 图片水印添加工具

## 1. 概述

本产品旨在提供一个简单易用的工具，用于在图片上添加基于拍摄时间的文本水印。用户可以自定义水印的字体大小、颜色和位置，程序会自动处理图片并保存带水印的新版本。

## 2. 功能需求

### 2.1 核心功能

1. **图片路径输入**
   - 用户输入一个包含图片文件的目录路径
   - 程序读取该目录下的所有图片文件

2. **EXIF信息读取**
   - 读取图片文件的EXIF信息
   - 提取拍摄时间信息
   - 格式化为年月日格式（YYYY-MM-DD）作为水印文本

3. **水印自定义设置**
   - 字体大小设置
   - 字体颜色设置
   - 水印位置设置（左上角、居中、右下角等）

4. **水印绘制与保存**
   - 在图片上绘制文本水印
   - 保存新图片到指定目录
   - 新目录命名为原目录名后加"_watermark"后缀

### 2.2 非功能性需求

1. **兼容性**
   - 支持常见图片格式（JPG, PNG等）
   - 跨平台支持（Windows, macOS, Linux）

2. **性能要求**
   - 批量处理图片时保持合理的处理速度
   - 内存使用优化

## 3. 技术要求

### 3.1 开发语言
- Python 3.x

### 3.2 依赖库
- Pillow (PIL) - 图片处理
- piexif - EXIF信息读取

### 3.3 接口设计
- 命令行界面(CLI)
- 支持参数输入

## 4. 使用流程

1. 用户运行程序并指定图片目录路径
2. 用户设置水印样式参数（字体大小、颜色、位置）
3. 程序读取目录下所有图片的EXIF信息
4. 程序提取拍摄时间并格式化为水印文本
5. 程序在每张图片上按指定样式添加水印
6. 程序将带水印的图片保存到新目录中

## 5. 错误处理

- 图片文件损坏或格式不支持时给出提示
- EXIF信息不存在时的处理方案
- 目录权限不足时的错误提示
- 参数输入错误时的验证和提示

## 6. 版本规划

### MVP版本
- 实现基本的水印添加功能
- 支持JPEG格式图片
- 固定几种水印位置选项

### 后续版本
- 支持更多图片格式
- 提供图形用户界面
- 增加更多自定义选项